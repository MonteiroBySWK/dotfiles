# Arquitetura

## Visão geral de alto nível

- **Camada de apresentação**: `src/app` e `src/components`
- **Componentes principais**: `AsciiBackground` (cena 3D) e `HeroTitle` (conteúdo do hero)
- **Lógica compartilhada**: `src/hooks` (detecção de dispositivo, estado de montagem, rotação de categorias)
- **Ativos estáticos**: `public/`

## Internals do `AsciiBackground`

- `AsciiBackground.tsx` monta um `Canvas` do React Three Fiber e carrega `Scene` e o efeito de pós-processamento `AsciiEffect`.
- `Scene.tsx` gerencia a orientação da câmera, luzes e compõe componentes menores: `MainIcosahedron`, `OuterRing`, `InnerRing`, `WireframeSphere`, `FloatingParticle`, `WaveRings`, `SpiralParticles`, `FrequencyWaves`, `RotatingSegmentedRing`.
- Cada peça visual é um componente pequeno que pode usar `useFrame` e refs. O componente pai (`Scene`) coordena estado global como `isReady` e refs de posição do mouse.
- O pós-processamento usa um `ShaderMaterial` e um render pass em quad full-screen que aplica o efeito ASCII sobre a textura renderizada.

## Internals do `HeroTitle`

- `HeroTitle.tsx` renderiza `TheraLogo`, um separador e `CategoryText` dentro de um container centralizado.
- A lógica de rotação de categorias foi extraída para `useCategoryRotation`, que expõe índices, flags de animação e refs para medir larguras de texto.
- Animações de layout são dirigidas por CSS: transições para opacidade, transform e largura do container.

## Billboarding e formas circulares

- Para evitar elipses causadas pela orientação da câmera, o billboarding é aplicado no nível de grupos usando `group.quaternion.copy(camera.quaternion)` quando necessário.
- Elementos circulares usam `SphereGeometry` ou escala uniforme para garantir aparência circular.

## Performance e mobile

- `useMobile` desativa o rastreamento do cursor e reduz contagens de partículas/efeitos em mobile.
- `dpr` do `Canvas` é limitado a valores conservadores (`[1, 1.5]`).
- Antialias é desativado em cenários onde o pós-processamento torna o custo elevado.
